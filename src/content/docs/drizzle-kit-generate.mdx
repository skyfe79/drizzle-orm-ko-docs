import CodeTab from "@mdx/CodeTab.astro";
import CodeTabs from "@mdx/CodeTabs.astro";
import Section from "@mdx/Section.astro";
import Tab from "@mdx/Tab.astro";
import Tabs from "@mdx/Tabs.astro";
import Callout from "@mdx/Callout.astro";
import Prerequisites from "@mdx/Prerequisites.astro"
import Npx from "@mdx/Npx.astro";
import SchemaFilePaths from "@mdx/SchemaFilePaths.mdx"
import Dialects from "@mdx/Dialects.mdx"

# `drizzle-kit generate`

<Prerequisites>
- Drizzleê³¼ `drizzle-kit` ì‹œì‘í•˜ê¸° - [ì—¬ê¸°ì„œ ì½ê¸°](/docs/get-started)
- Drizzle ìŠ¤í‚¤ë§ˆ ê¸°ë³¸ ê°œë… - [ì—¬ê¸°ì„œ ì½ê¸°](/docs/sql-schema-declaration)
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ê¸°ë³¸ - [ì—¬ê¸°ì„œ ì½ê¸°](/docs/connect-overview)
- Drizzle ë§ˆì´ê·¸ë ˆì´ì…˜ ê¸°ë³¸ - [ì—¬ê¸°ì„œ ì½ê¸°](/docs/migrations)
- Drizzle Kit [ê°œìš”](/docs/kit-overview) ë° [ì„¤ì • íŒŒì¼](/docs/drizzle-config-file)
</Prerequisites>

<br/>

`drizzle-kit generate`ëŠ” ì—¬ëŸ¬ë¶„ì˜ Drizzle ìŠ¤í‚¤ë§ˆ ì„ ì–¸ì´ë‚˜ ìŠ¤í‚¤ë§ˆ ë³€ê²½ì— ë”°ë¼ SQL ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

<Callout collapsed="ë‚´ë¶€ ë™ì‘ ì›ë¦¬">
Drizzle Kitì˜ `generate` ì»¤ë§¨ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¼ë ¨ì˜ ê³¼ì •ì„ ê±°ì¹©ë‹ˆë‹¤:
1. Drizzle ìŠ¤í‚¤ë§ˆ íŒŒì¼ì„ ì½ê³  ìŠ¤í‚¤ë§ˆì˜ JSON ìŠ¤ëƒ…ìƒ·ì„ ìƒì„±í•©ë‹ˆë‹¤.
2. ì´ì „ ë§ˆì´ê·¸ë ˆì´ì…˜ í´ë”ë¥¼ ì½ê³  í˜„ì¬ JSON ìŠ¤ëƒ…ìƒ·ê³¼ ê°€ì¥ ìµœê·¼ ìŠ¤ëƒ…ìƒ·ì„ ë¹„êµí•©ë‹ˆë‹¤.
3. JSON ì°¨ì´ì ì„ ê¸°ë°˜ìœ¼ë¡œ SQL ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤.
4. í˜„ì¬ íƒ€ì„ìŠ¤íƒ¬í”„ ì•„ë˜ì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ í´ë”ì— `migration.sql`ê³¼ `snapshot.json`ì„ ì €ì¥í•©ë‹ˆë‹¤.

<Section>
```typescript filename="src/schema.ts"
import * as p from "./drizzle-orm/pg-core";

export const users = p.pgTable("users", {
  id: p.serial().primaryKey(),
  name: p.text(),
  email: p.text().unique(), 
};
```
```                                  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  
â”‚ $ drizzle-kit generate â”‚                  
â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  
  â”‚                                           
  â”” 1. ì´ì „ ë§ˆì´ê·¸ë ˆì´ì…˜ í´ë” ì½ê¸°
    2. í˜„ì¬ì™€ ì´ì „ ìŠ¤í‚¤ë§ˆ ê°„ ì°¨ì´ì  ì°¾ê¸°
    3. í•„ìš”í•œ ê²½ìš° ê°œë°œìì—ê²Œ ì´ë¦„ ë³€ê²½ ìš”ì²­
  â”Œ 4. SQL ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„± ë° íŒŒì¼ë¡œ ì €ì¥
  â”‚    â”Œâ”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
  â”‚      ğŸ“‚ drizzle       
  â”‚      â”œ ğŸ“‚ _meta
  â”‚      â”” ğŸ“œ 0000_premium_mister_fear.sql
  v
```
```sql
-- drizzle/0000_premium_mister_fear.sql

CREATE TABLE "users" (
 "id" SERIAL PRIMARY KEY,
 "name" TEXT,
 "email" TEXT UNIQUE
);
```
</Section>
</Callout>

ì´ ê¸°ëŠ¥ì€ Drizzle ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê´€ë¦¬í•˜ëŠ” [ì½”ë“œ ìš°ì„ ](/docs/migrations) ì ‘ê·¼ ë°©ì‹ì„ ë‹¤ë£¨ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. 
ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ì€ [`drizzle-kit migrate`](/docs/drizzle-kit-migrate)ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, drizzle-ormì˜ `migrate()`ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, 
bytebaseì™€ ê°™ì€ ì™¸ë¶€ ë§ˆì´ê·¸ë ˆì´ì…˜ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, ì§ì ‘ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`drizzle-kit generate` ì»¤ë§¨ë“œëŠ” `dialect`ì™€ `schema` ê²½ë¡œ ì˜µì…˜ì„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤. 
ì´ ì˜µì…˜ë“¤ì€ [drizzle.config.ts](/docs/drizzle-config-file) ì„¤ì • íŒŒì¼ì„ í†µí•´ ì„¤ì •í•˜ê±°ë‚˜ CLI ì˜µì…˜ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<CodeTabs items={["ì„¤ì • íŒŒì¼ ì‚¬ìš©", "CLI ì˜µì…˜ ì‚¬ìš©"]}>
<Section>
```ts
// drizzle.config.ts
import { defineConfig } from "drizzle-kit";

export default defineConfig({
  dialect: "postgresql",
  schema: "./src/schema.ts",
});
```
```shell
npx drizzle-kit generate
```
</Section>

```shell
npx drizzle-kit generate --dialect=postgresql --schema=./src/schema.ts
```
</CodeTabs>


### ìŠ¤í‚¤ë§ˆ íŒŒì¼ ê²½ë¡œ

ì—¬ëŸ¬ë¶„ì€ í•˜ë‚˜ì˜ `schema.ts` íŒŒì¼ì„ ì‚¬ìš©í•˜ê±°ë‚˜, í”„ë¡œì íŠ¸ ì „ì²´ì— ê±¸ì³ ì›í•˜ëŠ” ë§Œí¼ ë§ì€ ìŠ¤í‚¤ë§ˆ íŒŒì¼ì„ ë¶„ì‚°ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Drizzle Kitì€ ì´ëŸ¬í•œ ìŠ¤í‚¤ë§ˆ íŒŒì¼ì˜ ê²½ë¡œë¥¼ [glob](https://www.digitalocean.com/community/tools/glob?comments=true&glob=/**/*.js&matches=false&tests=//%20This%20will%20match%20as%20it%20ends%20with%20'.js'&tests=/hello/world.js&tests=//%20This%20won't%20match!&tests=/test/some/globs) í˜•ì‹ìœ¼ë¡œ `schema` ì„¤ì • ì˜µì…˜ì„ í†µí•´ ì§€ì •í•˜ë„ë¡ ìš”êµ¬í•©ë‹ˆë‹¤.

<SchemaFilePaths/>


### ì»¤ìŠ¤í…€ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ì´ë¦„ ì„¤ì •í•˜ê¸°

`--name` CLI ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ì´ë¦„ì„ ì»¤ìŠ¤í…€í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```shell
npx drizzle-kit generate --name=init
```

ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ íŒŒì¼ êµ¬ì¡°ê°€ ìƒì„±ë©ë‹ˆë‹¤.

```plaintext {4}
ğŸ“¦ <project root>
 â”œ ğŸ“‚ drizzle
 â”‚ â”œ ğŸ“‚ _meta
 â”‚ â”” ğŸ“œ 0000_init.sql 
 â”œ ğŸ“‚ src
 â”” â€¦
```

ì´ë ‡ê²Œ í•˜ë©´ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ì´ë¦„ì´ `0000_init.sql`ë¡œ ì§€ì •ë©ë‹ˆë‹¤.


### í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ì— ì—¬ëŸ¬ ì„¤ì • íŒŒì¼ ì‚¬ìš©í•˜ê¸°

í”„ë¡œì íŠ¸ì—ì„œ ì—¬ëŸ¬ ê°œì˜ ì„¤ì • íŒŒì¼ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ ë‹¨ê³„ë‚˜ ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤, ë˜ëŠ” ë™ì¼í•œ í”„ë¡œì íŠ¸ ë‚´ì—ì„œ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•Œ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤.

<Npx>
  drizzle-kit generate --config=drizzle-dev.config.ts
  drizzle-kit generate --config=drizzle-prod.config.ts
</Npx>

```plaintext {5-6}
ğŸ“¦ <project root>
 â”œ ğŸ“‚ drizzle
 â”œ ğŸ“‚ src
 â”œ ğŸ“œ .env
 â”œ ğŸ“œ drizzle-dev.config.ts
 â”œ ğŸ“œ drizzle-prod.config.ts
 â”œ ğŸ“œ package.json
 â”” ğŸ“œ tsconfig.json
```

ì´ êµ¬ì¡°ë¥¼ í†µí•´ ê°œë°œ í™˜ê²½ê³¼ í”„ë¡œë•ì…˜ í™˜ê²½ì— ê°ê° ë‹¤ë¥¸ ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `drizzle-dev.config.ts`ëŠ” ê°œë°œìš© ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •ì„, `drizzle-prod.config.ts`ëŠ” í”„ë¡œë•ì…˜ìš© ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •ì„ ë‹´ê³  ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ í™˜ê²½ì— ë”°ë¼ ì ì ˆí•œ ì„¤ì •ì„ ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


### ì»¤ìŠ¤í…€ ë§ˆì´ê·¸ë ˆì´ì…˜

Drizzle Kitì—ì„œ ì•„ì§ ì§€ì›í•˜ì§€ ì•ŠëŠ” DDL ë³€ê²½ì´ë‚˜ ë°ì´í„° ì‹œë”©ì„ ìœ„í•´, ì—¬ëŸ¬ë¶„ì€ ë¹ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ì§ì ‘ SQL ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»¤ìŠ¤í…€ ë§ˆì´ê·¸ë ˆì´ì…˜ì— ëŒ€í•œ ìì„¸í•œ ë¬¸ì„œëŠ” [ì—¬ê¸°](/docs/kit-custom-migrations)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```shell
drizzle-kit generate --custom --name=seed-users
```

<Section>
```plaintext {5}
ğŸ“¦ <project root>
 â”œ ğŸ“‚ drizzle
 â”‚ â”œ ğŸ“‚ _meta
 â”‚ â”œ ğŸ“œ 0000_init.sql 
 â”‚ â”” ğŸ“œ 0001_seed-users.sql 
 â”œ ğŸ“‚ src
 â”” â€¦
```
```sql
-- ./drizzle/0001_seed-users.sql

INSERT INTO "users" ("name") VALUES('Dan');
INSERT INTO "users" ("name") VALUES('Andrew');
INSERT INTO "users" ("name") VALUES('Dandrew');
```
</Section>


### í™•ì¥ ê°€ëŠ¥í•œ ì„¤ì • ëª©ë¡

`drizzle-kit generate` ëª…ë ¹ì–´ëŠ” CLI ì „ìš© ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.

<rem025/>

|               |                                                      |
| :--------     | :--------------------------------------------------- |
| `custom`      | ì»¤ìŠ¤í…€ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìœ„í•œ ë¹ˆ SQL ìƒì„±               |
| `name`        | ì»¤ìŠ¤í…€ ì´ë¦„ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±                    |

<rem025/>

<Npx>
drizzle-kit push --name=init
drizzle-kit push --name=seed_users --custom
</Npx>

<br/>
<hr/>
<br/>
`drizzle-kit` ì„¤ì •ì€ [drizzle.config.ts](/docs/drizzle-config-file) íŒŒì¼ì„ í†µí•´ êµ¬ì„±í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ CI/CD íŒŒì´í”„ë¼ì¸ ë“±ì—ì„œ í•„ìš”í•  ê²½ìš° ëª¨ë“  ì„¤ì • ì˜µì…˜ì„ CLIë¥¼ í†µí•´ ì œê³µí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

|               |            |                                                                            |
| :------------ | :-------   | :----------------------------------------------------------------------    |
| `dialect`     | `required` | ë°ì´í„°ë² ì´ìŠ¤ ë°©ì–¸, <Dialects/> ì¤‘ í•˜ë‚˜ ì„ íƒ                                |
| `schema`      | `required` | íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ìŠ¤í‚¤ë§ˆ íŒŒì¼ ë˜ëŠ” ì—¬ëŸ¬ ìŠ¤í‚¤ë§ˆ íŒŒì¼ì´ ìˆëŠ” í´ë” ê²½ë¡œ            |
| `out`         |            | ë§ˆì´ê·¸ë ˆì´ì…˜ ì¶œë ¥ í´ë”, ê¸°ë³¸ê°’ì€ `./drizzle`                               |
| `config`      |            | ì„¤ì • íŒŒì¼ ê²½ë¡œ, ê¸°ë³¸ê°’ì€ `drizzle.config.ts`                               |
| `breakpoints` |            | SQL ë¬¸ì¥ì˜ ì¤‘ë‹¨ì , ê¸°ë³¸ê°’ì€ `true`                                         |


### í™•ì¥ ì˜ˆì œ

Drizzle ìŠ¤í‚¤ë§ˆê°€ `./src/schema.ts`ì— ìœ„ì¹˜í•˜ê³ , ê¸°ë³¸ê°’ì¸ `./drizzle` ëŒ€ì‹  `./migrations`ë¼ëŠ” ì´ë¦„ì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ í´ë”ë¥¼ ì‚¬ìš©í•˜ì—¬ `0001_seed-users.sql`ì´ë¼ëŠ” ì»¤ìŠ¤í…€ PostgreSQL ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ë§Œë“œëŠ” ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

ë˜í•œ, Drizzle ì„¤ì • íŒŒì¼ì„ `configs` í´ë”ì— ìœ„ì¹˜ì‹œí‚¬ ê²ƒì…ë‹ˆë‹¤.

ë¨¼ì € ì„¤ì • íŒŒì¼ì„ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤:

```plaintext {4}
ğŸ“¦ <project root>
 â”œ ğŸ“‚ migrations
 â”œ ğŸ“‚ configs
 â”‚ â”” ğŸ“œ drizzle.config.ts
 â”œ ğŸ“‚ src
 â”” â€¦
```

```ts filename='drizzle.config.ts'
import { defineConfig } from "drizzle-kit";

export default defineConfig({
  dialect: "postgresql",
  schema: "./src/schema.ts",
  out: "./migrations",
});
```

ì´ì œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤:
```shell
npx drizzle-kit generate --config=./configs/drizzle.config.ts --name=seed-users --custom
```

ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤:
<Section>
```plaintext {6}
ğŸ“¦ <project root>
 â”œ â€¦
 â”œ ğŸ“‚ migrations
 â”‚ â”œ ğŸ“‚ _meta
 â”‚ â”œ ğŸ“œ 0000_init.sql 
 â”‚ â”” ğŸ“œ 0001_seed-users.sql 
 â”” â€¦
```

```sql
-- ./drizzle/0001_seed-users.sql

INSERT INTO "users" ("name") VALUES('Dan');
INSERT INTO "users" ("name") VALUES('Andrew');
INSERT INTO "users" ("name") VALUES('Dandrew');
```
</Section>


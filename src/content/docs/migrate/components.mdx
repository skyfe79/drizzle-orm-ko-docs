
import Npm from "@mdx/Npm.astro";
import AnchorCards from "@mdx/AnchorCards.astro";
import Callout from "@mdx/Callout.astro";
import CodeTabs from "@mdx/CodeTabs.astro";
import CodeTab from "@mdx/CodeTab.astro";
import IsSupportedChipGroup from "@mdx/IsSupportedChipGroup.astro";
import Section from "@mdx/Section.astro";
import Tabs from "@mdx/Tabs.astro";
import Tab from "@mdx/Tab.astro";
import SimpleLinkCards from "@mdx/SimpleLinkCards.astro";
import Steps from "@mdx/Steps.astro";
import YoutubeCards from "@mdx/YoutubeCards.astro";

## Npm

<Npm>drizzle-orm</Npm>

<Npm>drizzle-orm -D drizzle-kit</Npm>



## AnchorCards


<AnchorCards
  cards={{
    Anchor1: "#anchor1",
    Anchor2: "#anchor2",
    Anchor3: "#anchor3",
    Anchor4: "#anchor4",
  }}
/>


`AnchorCards` ì»´í¬ë„ŒíŠ¸ëŠ” ì—¬ëŸ¬ ê°œì˜ ì•µì»¤ ë§í¬ë¥¼ ì¹´ë“œ í˜•íƒœë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. `cards` ì†ì„±ì€ ê°ì²´ í˜•íƒœë¡œ ì „ë‹¬ë˜ë©°, ê° í‚¤ëŠ” ì¹´ë“œì˜ ì´ë¦„ì„ ë‚˜íƒ€ë‚´ê³  ê°’ì€ í•´ë‹¹ ì•µì»¤ì˜ IDë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ í˜ì´ì§€ ë‚´ íŠ¹ì • ì„¹ì…˜ìœ¼ë¡œ ì‰½ê²Œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## ì½œì•„ì›ƒ


<Callout emoji={"ğŸ˜€"}>ì½œì•„ì›ƒ ì˜ˆì œ</Callout>

<Callout>ì½œì•„ì›ƒ ì˜ˆì œ</Callout>

<Callout type={"info"}>ì½œì•„ì›ƒ ì˜ˆì œ</Callout>

<Callout type={"warning"}>ì½œì•„ì›ƒ ì˜ˆì œ</Callout>

<Callout type={"error"}>ì½œì•„ì›ƒ ì˜ˆì œ</Callout>



## CodeTabsì™€ CodeTab ì‚¬ìš©í•˜ê¸°

<CodeTabs items={["index.ts", "schema.ts"]}>
    <CodeTab>
    ```typescript copy /schema/3
    import * as schema from './schema';
    import { drizzle } from 'drizzle-orm/...';

    const db = drizzle(client, { schema });

    const result = await db.query.users.findMany({
        with: {
            posts: true
        },
    });
    ```

    ```ts
    [{
        id: 10,
        name: "Dan",
        posts: [
            {
                id: 1,
                content: "SQL is awesome",
                authorId: 10,
            },
            {
                id: 2,
                content: "But check relational queries",
                authorId: 10,
            }
        ]
    }]
    ```
    </CodeTab>

    ```typescript copy
    import { integer, serial, text, pgTable } from 'drizzle-orm/pg-core';
    import { relations } from 'drizzle-orm';

    export const users = pgTable('users', {
        id: serial('id').primaryKey(),
        name: text('name').notNull(),
    });

    export const usersRelations = relations(users, ({ many }) => ({
        posts: many(posts),
    }));

    export const posts = pgTable('posts', {
        id: serial('id').primaryKey(),
        content: text('content').notNull(),
        authorId: integer('author_id').notNull(),
    });

    export const postsRelations = relations(posts, ({ one }) => ({
        author: one(users, { fields: [posts.authorId], references: [users.id] }),
    }));
    ```

</CodeTabs>



<IsSupportedChipGroup
  chips={{ PostgreSQL: true, SQLite: true, MySQL: false }}
/>


## ì„¹ì…˜

ì½”ë“œ ë¸”ë¡ ì—°ê²°ì„ ìœ„í•œ ì˜ˆì œ

<Section>
```typescript
import { sql } from "drizzle-orm";
import { integer, sqliteTable } from "drizzle-orm/sqlite-core";

const table = sqliteTable('table', {
    int1: integer('int1').default(42),
    int2: integer('int2').default(sql`(abs(42))`)
});
```

```sql
CREATE TABLE `table` (
    `int1` integer DEFAULT 42,
    `int2` integer DEFAULT (abs(42))
);
```

</Section>


## íƒ­ê³¼ ì„¹ì…˜ì„ ì‚¬ìš©í•œ íƒ­ ì˜ˆì œ

<Tabs items={['PostgreSQL', 'MySQL', 'SQLite']}>
  <Tab>
    <Section>
    ```typescript
    import { sql } from "drizzle-orm";
    import { integer, uuid, pgTable } from "drizzle-orm/pg-core";

    const table = pgTable('table', {
      integer1: integer('integer1').default(42),
      integer2: integer('integer2').default(sql`'42'::integer`),
      uuid1: uuid('uuid1').defaultRandom(),
      uuid2: uuid('uuid2').default(sql`gen_random_uuid()`),
    });
    ```

    ```sql
    CREATE TABLE IF NOT EXISTS "table" (
      "integer1" integer DEFAULT 42,
      "integer2" integer DEFAULT '42'::integer,
      "uuid1" uuid DEFAULT gen_random_uuid(),
      "uuid2" uuid DEFAULT gen_random_uuid()
    );
    ```
    </Section>
  </Tab> 
  <Tab>
    <Section>
    ```typescript
    import { sql } from "drizzle-orm";
    import { int, time, mysqlTable } from "drizzle-orm/mysql-core";
    
    const table = mysqlTable("table", {
      int: int("int").default(42),
      time: time("time").default(sql`cast("14:06:10" AS TIME)`),
    });
    ```
    ```sql
    CREATE TABLE `table` (
      `int` int DEFAULT 42,
      `time` time DEFAULT cast("14:06:10" AS TIME)
    );
    ```
    </Section>
  </Tab>
  <Tab>
    <Section>
    ```typescript
    import { sql } from "drizzle-orm";
    import { integer, sqliteTable } from "drizzle-orm/sqlite-core";

    const table = sqliteTable('table', {
      int1: integer('int1').default(42),
      int2: integer('int2').default(sql`(abs(42))`)
    });
    ```
    ```sql
    CREATE TABLE `table` (
      `int1` integer DEFAULT 42,
      `int2` integer DEFAULT (abs(42))
    );
    ```
    </Section>
  </Tab>
</Tabs>


## SimpleLinkCards


<SimpleLinkCards
  cards={{
    "PostgreSQL ì»¬ëŸ¼ íƒ€ì…": "/docs/column-types/pg",
    "MySQL ì»¬ëŸ¼ íƒ€ì…": "/docs/column-types/mysql",
    "SQLite ì»¬ëŸ¼ íƒ€ì…": "/docs/column-types/sqlite",
  }}
/>


## ë‹¨ê³„

### h4 í—¤ë” ì‚¬ìš©í•˜ê¸°

<Steps>


#### ë°”ë²¨ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜í•˜ê¸°

SQL ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ë²ˆë“¤ì— ì§ì ‘ ë¬¸ìì—´ë¡œ í¬í•¨ì‹œí‚¤ë ¤ë©´ ë°”ë²¨ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

```shell
npm install babel-plugin-inline-import
```


#### ì„¤ì • íŒŒì¼ ì—…ë°ì´íŠ¸

`babel.config.js`, `metro.config.js`, `drizzle.config.ts` íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.

```js filename='babel.config.js'
module.exports = function (api) {
  api.cache(true);

  return {
    presets: ["babel-preset-expo"],
    plugins: [["inline-import", { extensions: [".sql"] }]], // <-- ì´ ë¶€ë¶„ì„ ì¶”ê°€
  };
};
```

</Steps>

## ìœ íŠœë¸Œ ì¹´ë“œ


<YoutubeCards cards={[
    {
        id: "4ZhtoOFKFP8",
        title: "Next.js 14ì—ì„œ Tursoì™€ Drizzleë¡œ ê°€ì¥ ì‰¬ìš´ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •",
        description: "Sam Meech-Ward",
        time: '38:08'
    }, 
    {
        id: "NfVELsEZFsA",
        title: "Vercel, Neon, Drizzle, TailwindCSS, FlowBite ë“±ì„ ì‚¬ìš©í•œ Next.js í”„ë¡œì íŠ¸",
        description: "CodingEntrepreneurs",
        time: '5:46:28'
    }, 
    {
        id: "_SLxGYzv6jo",
        title: "ìƒˆë¡œ ì°¾ì€ ìµœì•  ë°ì´í„°ë² ì´ìŠ¤ ë„êµ¬",
        description: "Theo - t3.gg",
        time: '5:46'
    }
]}/>


## ì ‘ì„ ìˆ˜ ìˆëŠ” ì½”ë“œ ë¸”ë¡

```prisma  copy filename="prisma/schema.prisma" collapsable
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Product {
  id              Int           @id @default(autoincrement())
  name            String
  supplierId      Int
  unitPrice       Decimal       @db.Decimal(10, 4)
  unitsInStock    Int

  supplier        Supplier?     @relation(fields: [supplierId], references: [id])
  orderDetails    OrderDetail[]

  @@map("products")
}

model Supplier {
  id           Int       @id @default(autoincrement())
  companyName  String
  city         String
  country      String

  products     Product[]

  @@map("suppliers")
}

model OrderDetail {
  orderId   Int
  productId Int
  quantity  Int

  order   Order   @relation(fields: [orderId], references: [id])
  product Product @relation(fields: [productId], references: [id])

  @@id([orderId, productId])
  @@map("order_details")
}

model Order {
  id             Int       @id @default(autoincrement())
  orderDate      DateTime  @db.Date
  shippedDate    DateTime? @db.Date
  shipAddress    String
  shipPostalCode String?
  shipCountry    String

  orderDetails OrderDetail[]

  @@map("orders")
}
```



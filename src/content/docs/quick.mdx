import Npm from "@mdx/Npm.astro";

# ë¹ ë¥¸ ì‹œì‘

`PostgreSQL`ê³¼ `postgresjs`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹ ë¥´ê²Œ ì•±ì„ êµ¬ì¶•í•˜ê³  ì²« ë²ˆì§¸ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•´ ë³´ê² ìŠµë‹ˆë‹¤.

ë¨¼ì € `drizzle-orm`ê³¼ `drizzle-kit`ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤:

<Npm>
drizzle-orm postgres
-D drizzle-kit
</Npm>

ì´ì œ `schema.ts` íŒŒì¼ì„ ì •ì˜í•´ ë³´ê² ìŠµë‹ˆë‹¤:

```plaintext {4}
ğŸ“¦ <project root>
 â”œ ...
 â”œ ğŸ“‚ src
 â”‚ â”” ğŸ“œ schema.ts
 â”” ğŸ“œ package.json
```
```ts copy filename="schema.ts"
import { serial, text, timestamp, pgTable } from "drizzle-orm/pg-core";

export const user = pgTable("user", {
  id: serial("id"),
  name: text("name"),
  email: text("email"),
  password: text("password"),
  role: text("role").$type(),
  createdAt: timestamp("created_at"),
  updatedAt: timestamp("updated_at"),
});
```

ë‹¤ìŒìœ¼ë¡œ, Drizzle ì„¤ì • íŒŒì¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤:
```plaintext {4}
ğŸ“¦ <project root>
 â”œ ...
 â”œ ğŸ“‚ src
 â”œ ğŸ“œ drizzle.config.ts
 â”” ğŸ“œ package.json
```
```ts
import { defineConfig } from "drizzle-kit";

export default defineConfig({
  dialect: "postgresql",
  schema: "./src/schema.ts",
  out: "./drizzle",
});
```

`package.json`ì— `generate`ì™€ `migrate` ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•˜ê³  ì²« ë²ˆì§¸ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤:

```json filename="package.json" {5,6}
{
  "name": "first time?",
  "version": "0.0.1",
  "scripts": {
    "generate": "drizzle-kit generate",
    "migrate": "drizzle-kit migrate"
  }, 
}
```
```shell filename="terminal"
$ npm run generate
...

[âœ“] Your SQL migration file âœ drizzle/0000_pale_mister_fear.sql ğŸš€
```

ì™„ë£Œ! ì´ì œ ì²« ë²ˆì§¸ SQL ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ¥³
```plaintext {4}
ğŸ“¦ <project root>
 â”œ ğŸ“‚ drizzle
 â”‚ â”œ ğŸ“‚ _meta
 â”‚ â”” ğŸ“œ 0000_pale_mister_fear.sql
 â”œ ğŸ“‚ src
 â”œ ğŸ“œ drizzle.config.ts
 â”” ğŸ“œ package.json
```

ì´ì œ ë°ì´í„°ë² ì´ìŠ¤ì— ì²« ë²ˆì§¸ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•´ ë³´ê² ìŠµë‹ˆë‹¤:

```shell filename="terminal"
$ npm run migrate
```

ì´ì œ ëª¨ë“  ì¤€ë¹„ê°€ ëë‚¬ìŠµë‹ˆë‹¤!  

**ì¶•í•˜í•©ë‹ˆë‹¤ ğŸ‰**



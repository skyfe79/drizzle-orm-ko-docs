---
title: DrizzleORM v0.28.6 ë¦´ë¦¬ìŠ¤
pubDate: 2023-09-06
description: MySQLì˜ ë‚ ì§œ/ì‹œê°„ ë§¤í•‘ ë³€ê²½, LibSQL ë°°ì¹˜ API ì§€ì› ì¶”ê°€, SQLiteì˜ í…ìŠ¤íŠ¸ì— JSON ëª¨ë“œ ì¶”ê°€, Relational Query API í˜¸ì¶œì— '.toSQL()' ì¶”ê°€, PostgreSQL ë°°ì—´ ì—°ì‚°ì ì¶”ê°€, Relational Queriesì˜ 'where' í•¨ìˆ˜ì— ë” ë§ì€ SQL ì—°ì‚°ì ì¶”ê°€, ë²„ê·¸ ìˆ˜ì •
---
import Section from "@mdx/Section.astro";

## ë³€ê²½ ì‚¬í•­

> **ì°¸ê³ **:
> MySQL `datetime`ì—ì„œ `mode: 'date'`ë¥¼ ì‚¬ìš©í•  ê²½ìš°, ì´ì œ ë‚ ì§œë¥¼ UTC ë¬¸ìì—´ë¡œ ì €ì¥í•˜ê³  ë°ì´í„°ë„ UTCë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤. ì´ëŠ” MySQLì˜ `datetime` ë™ì‘ê³¼ ì¼ì¹˜í•˜ë„ë¡ ì¡°ì •ëœ ê²ƒì…ë‹ˆë‹¤. ë‹¤ë¥¸ ë™ì‘ì´ í•„ìš”í•˜ê±°ë‚˜ `datetime` ë§¤í•‘ì„ ë‹¤ë¥´ê²Œ ì²˜ë¦¬í•˜ë ¤ë©´ `mode: 'string'`ì„ ì‚¬ìš©í•˜ê±°ë‚˜ [ì»¤ìŠ¤í…€ íƒ€ì…](/docs/custom-types) êµ¬í˜„ì„ ì°¸ê³ í•˜ì„¸ìš”.

êµ¬í˜„ ì„¸ë¶€ ì‚¬í•­ì€ [MySQL ë‚ ì§œ/ì‹œê°„ ë§¤í•‘ ìˆ˜ì •](https://github.com/drizzle-team/drizzle-orm/pull/1082)ì„ í™•ì¸í•˜ì„¸ìš”.


## New Features





### ğŸ‰ `LibSQL` ë°°ì¹˜ API ì§€ì›

ì°¸ê³ : https://docs.turso.tech/reference/client-access/javascript-typescript-sdk#execute-a-batch-of-statements

ë°°ì¹˜ API ì‚¬ìš© ì˜ˆì œ:

<Section>
```ts copy {1}
const batchResponse = await db.batch([
    db.insert(usersTable).values({ id: 1, name: 'John' }).returning({
        id: usersTable.id,
    }),
    db.update(usersTable).set({ name: 'Dan' }).where(eq(usersTable.id, 1)),
    db.query.usersTable.findMany({}),
    db.select().from(usersTable).where(eq(usersTable.id, 1)),
    db.select({ id: usersTable.id, invitedBy: usersTable.invitedBy }).from(
        usersTable,
    ),
]);
```

```ts
type BatchResponse = [
    {
        id: number;
    }[],
    ResultSet,
    {
        id: number;
        name: string;
        verified: number;
        invitedBy: number | null;
    }[],
    {
        id: number;
        name: string;
        verified: number;
        invitedBy: number | null;
    }[],
    {
        id: number;
        invitedBy: number | null;
    }[],
];
```
</Section>

`db.batch` ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ë¹Œë”:

```ts
`db.all()`,
`db.get()`,
`db.values()`,
`db.run()`,
`db.query..findMany()`,
`db.query..findFirst()`,
`db.select()...`,
`db.update()...`,
`db.delete()...`,
`db.insert()...`,
```

ë” ë§ì€ ì‚¬ìš© ì˜ˆì œëŠ” ì—¬ê¸°ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: [integration-tests/tests/libsql-batch.test.ts](https://github.com/drizzle-team/drizzle-orm/pull/1161/files#diff-17253895532e520545027dd48dcdbac2d69a5a49d594974e6d55d7502f89b838R248) ë° [ë¬¸ì„œ](/docs/batch-api)


### ğŸ‰ SQLiteì—ì„œ JSON ëª¨ë“œë¡œ í…ìŠ¤íŠ¸ ì¶”ê°€í•˜ê¸°

ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/get-started-postgresql#http-proxy)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts copy {2}
const test = sqliteTable('test', {
    dataTyped: text('data_typed', { mode: 'json' }).$type().notNull(),
});
```

ìœ„ ì½”ë“œëŠ” SQLite í…Œì´ë¸”ì„ ìƒì„±í•  ë•Œ, `data_typed` ì»¬ëŸ¼ì„ JSON ëª¨ë“œë¡œ ì„¤ì •í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ í•´ë‹¹ ì»¬ëŸ¼ì— JSON í˜•ì‹ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


### ğŸ‰ ê´€ê³„í˜• ì¿¼ë¦¬ API í˜¸ì¶œì— `.toSQL()` ì¶”ê°€í•˜ê¸°

```ts copy {1}
const query = db.query.usersTable.findFirst().toSQL();
```

ìœ„ ì½”ë“œëŠ” `usersTable`ì—ì„œ ì²« ë²ˆì§¸ ë ˆì½”ë“œë¥¼ ì°¾ëŠ” ì¿¼ë¦¬ë¥¼ SQL ë¬¸ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. `.toSQL()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” SQL ì¿¼ë¦¬ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ ë””ë²„ê¹…ì´ë‚˜ ì¿¼ë¦¬ ìµœì í™”ì— ìœ ìš©í•˜ê²Œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


### ğŸ‰ ìƒˆë¡œìš´ PostgreSQL ë°°ì—´ ì—°ì‚°ì ì¶”ê°€

ìƒˆë¡œ ì¶”ê°€ëœ ì—°ì‚°ìì™€ ì‚¬ìš© ì˜ˆì œë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.  
`arrayContains`, `arrayContained`, `arrayOverlaps`

ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/get-started-postgresql#http-proxy)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts copy {2,5,8,11,12,13,14}
// ë°°ì—´ì´ íŠ¹ì • ê°’ì„ í¬í•¨í•˜ëŠ”ì§€ í™•ì¸
const contains = await db.select({ id: posts.id }).from(posts)
    .where(arrayContains(posts.tags, ['Typescript', 'ORM']));

// ë°°ì—´ì´ íŠ¹ì • ê°’ì— í¬í•¨ë˜ëŠ”ì§€ í™•ì¸
const contained = await db.select({ id: posts.id }).from(posts)
    .where(arrayContained(posts.tags, ['Typescript', 'ORM']));

// ë°°ì—´ì´ íŠ¹ì • ê°’ê³¼ ê²¹ì¹˜ëŠ”ì§€ í™•ì¸
const overlaps = await db.select({ id: posts.id }).from(posts)
    .where(arrayOverlaps(posts.tags, ['Typescript', 'ORM']));

// ì„œë¸Œì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ì´ íŠ¹ì • ê°’ì„ í¬í•¨í•˜ëŠ”ì§€ í™•ì¸
const withSubQuery = await db.select({ id: posts.id }).from(posts)
    .where(arrayContains(
        posts.tags,
        db.select({ tags: posts.tags }).from(posts).where(eq(posts.id, 1)),
    ));
```


### ğŸ‰ Relational Queriesì˜ where í•„í„° í•¨ìˆ˜ì— ë” ë§ì€ SQL ì—°ì‚°ì ì¶”ê°€

ë” ë§ì€ ì˜ˆì œëŠ” [ë¬¸ì„œ](/docs/rqb#select-filters)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<Section>
```ts
// ì´ì „
import { inArray } from "drizzle-orm/pg-core";

await db.users.findFirst({
  where: (table, _) => inArray(table.id, [ ... ])
})
```

```ts copy {3}
// ì´í›„
await db.users.findFirst({
  where: (table, { inArray }) => inArray(table.id, [ ... ])
})
```
</Section>


## ìˆ˜ì • ì‚¬í•­

- SQLiteì—ì„œ `on conflict` êµ¬ë¬¸ì˜ ìœ„ì¹˜ ìˆ˜ì • ([#1076](https://github.com/drizzle-team/drizzle-orm/pull/1076))
- libsql/client íƒ€ì… import ë¬¸ì œ í•´ê²° ([#1122](https://github.com/drizzle-team/drizzle-orm/pull/1122))
- RDSì—ì„œ raw SQL ì¿¼ë¦¬ê°€ ì œëŒ€ë¡œ ë§¤í•‘ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ ìˆ˜ì • ([#1071](https://github.com/drizzle-team/drizzle-orm/pull/1071))
- MySQLì—ì„œ Datetime ë§¤í•‘ ë¬¸ì œ í•´ê²° ([#1082](https://github.com/drizzle-team/drizzle-orm/pull/1082))
- smallserialì´ serialë¡œ ìƒì„±ë˜ëŠ” ë¬¸ì œ ìˆ˜ì • ([#1127](https://github.com/drizzle-team/drizzle-orm/pull/1127))



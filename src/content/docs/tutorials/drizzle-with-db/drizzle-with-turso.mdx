---
title: "Drizzleì™€ Turso ì‚¬ìš©í•˜ê¸°"
date: "2024-02-17"
svgs: ['<svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 43.4805 67.3037)" fill="currentColor"></rect><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 76.9395 46.5342)" fill="currentColor"></rect><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 128.424 46.5352)" fill="currentColor"></rect><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 94.957 67.3037)" fill="currentColor"></rect></svg>', '<svg width="241" height="240" viewBox="0 0 241 240" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M220.035 83.61C215.365 55.67 190.875 35 190.875 35V65.78L176.335 69.53L167.225 58.56L162.415 68.02C152.495 65.32 138.835 63.58 120.045 63.58C101.255 63.58 87.5949 65.33 77.6749 68.02L72.8649 58.56L63.7549 69.53L49.2149 65.78V35C49.2149 35 24.7249 55.67 20.0549 83.61L52.1949 94.73C53.2449 114.16 61.9849 166.61 64.4849 171.37C67.1449 176.44 81.2649 190.93 92.3149 196.5C92.3149 196.5 96.3149 192.27 98.7549 188.54C101.855 192.19 117.865 204.99 120.055 204.99C122.245 204.99 138.255 192.2 141.355 188.54C143.795 192.27 147.795 196.5 147.795 196.5C158.845 190.93 172.965 176.44 175.625 171.37C178.125 166.61 186.865 114.16 187.915 94.73L220.055 83.61H220.035ZM173.845 128.35L152.095 130.29L154.005 156.96C154.005 156.96 140.775 167.91 120.045 167.91C99.3149 167.91 86.0849 156.96 86.0849 156.96L87.9949 130.29L66.2449 128.35L62.5249 98.31L98.5749 110.79L95.7749 148.18C102.475 149.88 109.525 151.57 120.055 151.57C130.585 151.57 137.625 149.88 144.325 148.18L141.525 110.79L177.575 98.31L173.855 128.35H173.845Z" fill="currentColor"/></svg>']
---

import Prerequisites from "@mdx/Prerequisites.astro";
import Npm from '@mdx/Npm.astro';
import Steps from '@mdx/Steps.astro';
import Section from "@mdx/Section.astro";
import Callout from '@mdx/Callout.astro';

## Tursoì™€ Drizzle ORM ì„¤ì •í•˜ê¸°

ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” [Turso](https://docs.turso.tech/introduction)ì™€ í•¨ê»˜ Drizzle ORMì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

<Prerequisites>
- Drizzle ORMê³¼ [Drizzle kit](/docs/kit-overview)ì„ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
<Npm>
drizzle-orm
-D drizzle-kit
</Npm>
- í™˜ê²½ ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `dotenv` íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ì´ íŒ¨í‚¤ì§€ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [ì—¬ê¸°](https://www.npmjs.com/package/dotenv)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<Npm>
  dotenv
</Npm>
- `@libsql/client` íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ì´ íŒ¨í‚¤ì§€ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [ì—¬ê¸°](https://www.npmjs.com/package/@libsql/client)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<Npm>
  @libsql/client
</Npm>
- Turso CLIë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](https://docs.turso.tech/cli/introduction)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
</Prerequisites>

[Turso](https://docs.turso.tech/concepts)ëŠ” [libSQL](https://docs.turso.tech/libsql)ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ SQLite í˜¸í™˜ ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. libSQLì€ SQLiteì˜ ì˜¤í”ˆ ì†ŒìŠ¤ í¬í¬ì…ë‹ˆë‹¤. TursoëŠ” ì¡°ì§ë‹¹ ìˆ˜ì‹­ë§Œ ê°œì˜ ë°ì´í„°ë² ì´ìŠ¤ë¡œ í™•ì¥í•  ìˆ˜ ìˆìœ¼ë©°, ë§ˆì´í¬ë¡œì´ˆ ë‹¨ìœ„ì˜ ì§€ì—° ì‹œê°„ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ìì²´ ì„œë²„ë¥¼ í¬í•¨í•œ ëª¨ë“  ìœ„ì¹˜ë¡œì˜ ë³µì œë¥¼ ì§€ì›í•©ë‹ˆë‹¤. Tursoì˜ ê°œë…ì— ëŒ€í•´ ë” ìì„¸íˆ ì•Œì•„ë³´ë ¤ë©´ [ì—¬ê¸°](https://docs.turso.tech/concepts)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

Drizzle ORMì€ libSQL ë“œë¼ì´ë²„ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•©ë‹ˆë‹¤. SQL ë°©ì–¸ê³¼ ë°©ì–¸ë³„ ë“œë¼ì´ë²„ ë° êµ¬ë¬¸ì„ ìˆ˜ìš©í•˜ë©°, ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” SQLite ìŠ¤íƒ€ì¼ì˜ `all`, `get`, `values`, `run` ì¿¼ë¦¬ ë©”ì„œë“œ êµ¬ë¬¸ì„ ëŒ€ë¶€ë¶„ ë°˜ì˜í•©ë‹ˆë‹¤.

Turso ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì€ [ê³µì‹ ë¬¸ì„œ](https://docs.turso.tech/quickstart)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

<Steps>


#### Turso íšŒì›ê°€ì… ë˜ëŠ” ë¡œê·¸ì¸

íšŒì›ê°€ì…:

```bash
turso auth signup
```

ë¡œê·¸ì¸:

```bash
turso auth login
```


#### ìƒˆë¡œìš´ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±

`turso db create <DATABASE_NAME>` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ìƒˆë¡œìš´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:

```bash
turso db create drizzle-turso-db
```

ìƒì„±ëœ ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:

```bash
turso db show drizzle-turso-db
```


#### ì¸ì¦ í† í° ìƒì„±í•˜ê¸°

ë°ì´í„°ë² ì´ìŠ¤ìš© ì¸ì¦ í† í°ì„ ìƒì„±í•˜ë ¤ë©´ ë‹¤ìŒ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:

```bash
turso db tokens create drizzle-turso-db
```

ì´ ì»¤ë§¨ë“œì™€ ê´€ë ¨ëœ ì˜µì…˜ì— ëŒ€í•´ ë” ìì„¸íˆ ì•Œì•„ë³´ë ¤ë©´ [ê³µì‹ ë¬¸ì„œ](https://docs.turso.tech/cli/db/tokens/create)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.


#### í™˜ê²½ ë³€ìˆ˜ ì—…ë°ì´íŠ¸

`.env` ë˜ëŠ” `.env.local` íŒŒì¼ì— ì—°ê²° URLê³¼ ì¸ì¦ í† í°ì„ ì¶”ê°€í•˜ì„¸ìš”.

```text copy
TURSO_CONNECTION_URL=
TURSO_AUTH_TOKEN=
```


#### Drizzle ORMì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê¸°

`src/db` ë””ë ‰í† ë¦¬ì— `index.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤:

```typescript
import { config } from 'dotenv';
import { drizzle } from 'drizzle-orm/libsql';

// .env ë˜ëŠ” .env.local íŒŒì¼ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
config({ path: '.env' });

// Drizzle ORMì„ ì‚¬ìš©í•´ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •
export const db = drizzle({
  connection: {
    url: process.env.TURSO_CONNECTION_URL!, // TURSO ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° URL
    authToken: process.env.TURSO_AUTH_TOKEN!, // TURSO ì¸ì¦ í† í°
  },
});
```

ì´ ì½”ë“œëŠ” Drizzle ORMì„ ì‚¬ìš©í•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ëŠ” ê¸°ë³¸ ì„¤ì •ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. í™˜ê²½ ë³€ìˆ˜ íŒŒì¼(`.env` ë˜ëŠ” `.env.local`)ì—ì„œ `TURSO_CONNECTION_URL`ê³¼ `TURSO_AUTH_TOKEN`ì„ ì½ì–´ì™€ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ êµ¬ì„±í•©ë‹ˆë‹¤.


#### í…Œì´ë¸” ìƒì„±í•˜ê¸°

`src/db` ë””ë ‰í† ë¦¬ì— `schema.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  í…Œì´ë¸”ì„ ì„ ì–¸í•©ë‹ˆë‹¤:

```typescript
import { sql } from 'drizzle-orm';
import { integer, sqliteTable, text } from 'drizzle-orm/sqlite-core';

// ì‚¬ìš©ì í…Œì´ë¸” ì •ì˜
export const usersTable = sqliteTable('users', {
  id: integer('id').primaryKey(), // ê¸°ë³¸ í‚¤
  name: text('name').notNull(), // ì´ë¦„ (í•„ìˆ˜)
  age: integer('age').notNull(), // ë‚˜ì´ (í•„ìˆ˜)
  email: text('email').unique().notNull(), // ì´ë©”ì¼ (ê³ ìœ , í•„ìˆ˜)
});

// ê²Œì‹œë¬¼ í…Œì´ë¸” ì •ì˜
export const postsTable = sqliteTable('posts', {
  id: integer('id').primaryKey(), // ê¸°ë³¸ í‚¤
  title: text('title').notNull(), // ì œëª© (í•„ìˆ˜)
  content: text('content').notNull(), // ë‚´ìš© (í•„ìˆ˜)
  userId: integer('user_id') // ì‚¬ìš©ì ID (ì™¸ë˜ í‚¤)
    .notNull()
    .references(() => usersTable.id, { onDelete: 'cascade' }), // ì‚¬ìš©ì ì‚­ì œ ì‹œ ì—°ì‡„ ì‚­ì œ
  createdAt: text('created_at') // ìƒì„±ì¼
    .default(sql`(CURRENT_TIMESTAMP)`) // ê¸°ë³¸ê°’: í˜„ì¬ ì‹œê°„
    .notNull(),
  updateAt: integer('updated_at', { mode: 'timestamp' }) // ìˆ˜ì •ì¼
    .$onUpdate(() => new Date()), // ì—…ë°ì´íŠ¸ ì‹œ í˜„ì¬ ì‹œê°„ìœ¼ë¡œ ìë™ ì„¤ì •
});

// ì‚¬ìš©ì ì‚½ì… íƒ€ì…
export type InsertUser = typeof usersTable.$inferInsert;
// ì‚¬ìš©ì ì„ íƒ íƒ€ì…
export type SelectUser = typeof usersTable.$inferSelect;

// ê²Œì‹œë¬¼ ì‚½ì… íƒ€ì…
export type InsertPost = typeof postsTable.$inferInsert;
// ê²Œì‹œë¬¼ ì„ íƒ íƒ€ì…
export type SelectPost = typeof postsTable.$inferSelect;
```


#### Drizzle ì„¤ì • íŒŒì¼ ì„¤ì •í•˜ê¸°

**Drizzle ì„¤ì • íŒŒì¼**ì€ [Drizzle Kit](/docs/kit-overview)ì—ì„œ ì‚¬ìš©ë˜ëŠ” íŒŒì¼ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´, ë§ˆì´ê·¸ë ˆì´ì…˜ í´ë”, ìŠ¤í‚¤ë§ˆ íŒŒì¼ ë“±ì— ëŒ€í•œ ëª¨ë“  ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `drizzle.config.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•˜ì„¸ìš”:

```typescript copy filename="drizzle.config.ts"
import { config } from 'dotenv';
import { defineConfig } from 'drizzle-kit';

// .env íŒŒì¼ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
config({ path: '.env' });

export default defineConfig({
  schema: './src/db/schema.ts', // ìŠ¤í‚¤ë§ˆ íŒŒì¼ ê²½ë¡œ
  out: './migrations',          // ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì´ ìƒì„±ë  ê²½ë¡œ
  dialect: 'turso',             // ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ dialect
  dbCredentials: {
    url: process.env.TURSO_CONNECTION_URL!, // Turso ì—°ê²° URL
    authToken: process.env.TURSO_AUTH_TOKEN!, // Turso ì¸ì¦ í† í°
  },
});
```

ì´ ì„¤ì • íŒŒì¼ì€ Drizzle Kitì´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë° í•„ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. `schema`ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•œ íŒŒì¼ì˜ ê²½ë¡œë¥¼, `out`ì€ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì´ ì €ì¥ë  ê²½ë¡œë¥¼ ì§€ì •í•©ë‹ˆë‹¤. `dialect`ëŠ” ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¢…ë¥˜ë¥¼ ë‚˜íƒ€ë‚´ë©°, `dbCredentials`ì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì— í•„ìš”í•œ ìê²© ì¦ëª…ì´ í¬í•¨ë©ë‹ˆë‹¤.


#### ë°ì´í„°ë² ì´ìŠ¤ì— ë³€ê²½ ì‚¬í•­ ì ìš©í•˜ê¸°

`drizzle-kit generate` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•˜ê³ , `drizzle-kit migrate` ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±:

```bash
npx drizzle-kit generate
```

ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ì€ `drizzle.config.ts`ì— ì§€ì •ëœ `migrations` ë””ë ‰í† ë¦¬ì— ì €ì¥ë©ë‹ˆë‹¤. ì´ ë””ë ‰í† ë¦¬ì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë° í•„ìš”í•œ SQL íŒŒì¼ê³¼, ë‹¤ì–‘í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„ì—ì„œì˜ ìŠ¤í‚¤ë§ˆ ìŠ¤ëƒ…ìƒ·ì„ ì €ì¥í•˜ëŠ” `meta` í´ë”ê°€ í¬í•¨ë©ë‹ˆë‹¤.

ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜ˆì œ:

```sql
CREATE TABLE `posts` (
	`id` integer PRIMARY KEY NOT NULL,
	`title` text NOT NULL,
	`content` text NOT NULL,
	`user_id` integer NOT NULL,
	`created_at` text DEFAULT (CURRENT_TIMESTAMP) NOT NULL,
	`updated_at` integer,
	FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON UPDATE no action ON DELETE cascade
);
--> statement-breakpoint
CREATE TABLE `users` (
	`id` integer PRIMARY KEY NOT NULL,
	`name` text NOT NULL,
	`age` integer NOT NULL,
	`email` text NOT NULL
);
--> statement-breakpoint
CREATE UNIQUE INDEX `users_email_unique` ON `users` (`email`);
```

ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰:

```bash
npx drizzle-kit migrate
```

ë˜ëŠ”, [Drizzle kit push ëª…ë ¹ì–´](/docs/kit-overview#prototyping-with-db-push)ë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì§ì ‘ ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

```bash
npx drizzle-kit push
```

<Callout type="warning">
í‘¸ì‹œ ëª…ë ¹ì–´ëŠ” ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œ ìƒˆë¡œìš´ ìŠ¤í‚¤ë§ˆ ë””ìì¸ì´ë‚˜ ë³€ê²½ ì‚¬í•­ì„ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸í•´ì•¼ í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ê´€ë¦¬í•˜ëŠ” ì˜¤ë²„í—¤ë“œ ì—†ì´ ë¹ ë¥´ê²Œ ë°˜ë³µ ì‘ì—…ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</Callout>
</Steps>


### ê¸°ë³¸ íŒŒì¼ êµ¬ì¡°

ì´ í”„ë¡œì íŠ¸ì˜ ê¸°ë³¸ íŒŒì¼ êµ¬ì¡°ì…ë‹ˆë‹¤. `src/db` ë””ë ‰í† ë¦¬ì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ íŒŒì¼ë“¤ì´ ìœ„ì¹˜í•˜ë©°, `index.ts` íŒŒì¼ì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •ì´, `schema.ts` íŒŒì¼ì—ëŠ” ìŠ¤í‚¤ë§ˆ ì •ì˜ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```plaintext
ğŸ“¦ <project root>
 â”œ ğŸ“‚ src
 â”‚   â”œ ğŸ“‚ db
 â”‚   â”‚  â”œ ğŸ“œ index.ts
 â”‚   â”‚  â”” ğŸ“œ schema.ts
 â”œ ğŸ“‚ migrations
 â”‚  â”œ ğŸ“‚ meta
 â”‚  â”‚  â”œ ğŸ“œ _journal.json
 â”‚  â”‚  â”” ğŸ“œ 0000_snapshot.json
 â”‚  â”” ğŸ“œ 0000_watery_spencer_smythe.sql
 â”œ ğŸ“œ .env
 â”œ ğŸ“œ drizzle.config.ts
 â”œ ğŸ“œ package.json
 â”” ğŸ“œ tsconfig.json
```


## ì¿¼ë¦¬ ì˜ˆì œ

ì˜ˆë¥¼ ë“¤ì–´, `src/db/queries` í´ë”ë¥¼ ë§Œë“¤ê³  ê° ì‘ì—…(ì‚½ì…, ì„ íƒ, ì—…ë°ì´íŠ¸, ì‚­ì œ)ë³„ë¡œ íŒŒì¼ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤.


#### ë°ì´í„° ì‚½ì…

ë°ì´í„° ì‚½ì… ì¿¼ë¦¬ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/insert)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

```typescript copy filename="src/db/queries/insert.ts" {4, 8}
import { db } from '../index';
import { InsertPost, InsertUser, postsTable, usersTable } from '../schema';

export async function createUser(data: InsertUser) {
  await db.insert(usersTable).values(data);
}

export async function createPost(data: InsertPost) {
  await db.insert(postsTable).values(data);
}
```


#### ë°ì´í„° ì„ íƒí•˜ê¸°

ì„ íƒ ì¿¼ë¦¬ì— ëŒ€í•´ ë” ì•Œì•„ë³´ë ¤ë©´ [ë¬¸ì„œ](/docs/select)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

```typescript copy filename="src/db/queries/select.ts" {5, 16, 41}
import { asc, count, eq, getTableColumns, gt, sql } from 'drizzle-orm';
import { db } from '../index';
import { SelectUser, postsTable, usersTable } from '../schema';

export async function getUserById(id: SelectUser['id']): Promise<
  Array<{
    id: number;
    name: string;
    age: number;
    email: string;
  }>
> {
  return db.select().from(usersTable).where(eq(usersTable.id, id));
}

export async function getUsersWithPostsCount(
  page = 1,
  pageSize = 5,
): Promise<
  Array<{
    postsCount: number;
    id: number;
    name: string;
    age: number;
    email: string;
  }>
> {
  return db
    .select({
      ...getTableColumns(usersTable),
      postsCount: count(postsTable.id),
    })
    .from(usersTable)
    .leftJoin(postsTable, eq(usersTable.id, postsTable.userId))
    .groupBy(usersTable.id)
    .orderBy(asc(usersTable.id))
    .limit(pageSize)
    .offset((page - 1) * pageSize);
}

export async function getPostsForLast24Hours(
  page = 1,
  pageSize = 5,
): Promise<
  Array<{
    id: number;
    title: string;
  }>
> {
  return db
    .select({
      id: postsTable.id,
      title: postsTable.title,
    })
    .from(postsTable)
    .where(gt(postsTable.createdAt, sql`(datetime('now','-24 hour'))`))
    .orderBy(asc(postsTable.title), asc(postsTable.id))
    .limit(pageSize)
    .offset((page - 1) * pageSize);
}
```

ë˜ëŠ” [ê´€ê³„í˜• ì¿¼ë¦¬ êµ¬ë¬¸](/docs/rqb)ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.


#### ë°ì´í„° ì—…ë°ì´íŠ¸

ë°ì´í„° ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ì— ëŒ€í•´ ë” ì•Œì•„ë³´ë ¤ë©´ [ë¬¸ì„œ](/docs/update)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

```typescript copy filename="src/db/queries/update.ts" {5}
import { eq } from 'drizzle-orm';
import { db } from '../index';
import { SelectPost, postsTable } from '../schema';

export async function updatePost(id: SelectPost['id'], data: Partial<SelectPost>) {
  await db.update(postsTable).set(data).where(eq(postsTable.id, id));
}
```


#### ë°ì´í„° ì‚­ì œ

ì‚­ì œ ì¿¼ë¦¬ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/delete)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```typescript copy filename="src/db/queries/delete.ts" {5}
import { eq } from 'drizzle-orm';
import { db } from '../index';
import { SelectUser, usersTable } from '../schema';

export async function deleteUser(id: SelectUser['id']) {
  await db.delete(usersTable).where(eq(usersTable.id, id));
}
```



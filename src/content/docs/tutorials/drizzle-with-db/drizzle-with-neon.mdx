---
title: "Neon Postgresì™€ Drizzle ì‚¬ìš©í•˜ê¸°"
date: "2024-05-10"
svgs: ['<svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 43.4805 67.3037)" fill="currentColor"></rect><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 76.9395 46.5342)" fill="currentColor"></rect><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 128.424 46.5352)" fill="currentColor"></rect><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 94.957 67.3037)" fill="currentColor"></rect></svg>',<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 6.75867C4 6.02702 4.29064 5.32535 4.80799 4.80799C5.32535 4.29064 6.02702 4 6.75867 4H17.2413C17.973 4 18.6747 4.29064 19.192 4.80799C19.7094 5.32535 20 6.02702 20 6.75867V15.6742C20 17.2502 18.0053 17.9342 17.0382 16.6902L14.0138 12.7996V17.5173C14.0138 18.1758 13.7522 18.8073 13.2866 19.2728C12.821 19.7384 12.1896 20 11.5311 20H6.75867C6.02702 20 5.32535 19.7094 4.80799 19.192C4.29064 18.6747 4 17.973 4 17.2413V6.75867ZM6.75867 6.20711C6.45378 6.20711 6.20711 6.45378 6.20711 6.75822V17.2413C6.20711 17.5462 6.45378 17.7933 6.75822 17.7933H11.6138C11.7662 17.7933 11.8067 17.6698 11.8067 17.5173V11.1911C11.8067 9.61467 13.8013 8.93067 14.7689 10.1751L17.7933 14.0653V6.75867C17.7933 6.45378 17.8218 6.20711 17.5173 6.20711H6.75867Z" /></svg>']
---

import Prerequisites from "@mdx/Prerequisites.astro";
import Npm from "@mdx/Npm.astro";
import Steps from "@mdx/Steps.astro";
import Section from "@mdx/Section.astro";
import Callout from "@mdx/Callout.astro";

## Neonê³¼ Drizzle ORM ì„¤ì •í•˜ê¸°

ì´ íŠœí† ë¦¬ì–¼ì€ [Neon Postgres](https://neon.tech/) ë°ì´í„°ë² ì´ìŠ¤ì™€ Drizzle ORMì„ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ì•„ì§ Neon ê³„ì •ì´ ì—†ë‹¤ë©´ [ì—¬ê¸°](https://neon.tech)ì—ì„œ ê°€ì…í•˜ì„¸ìš”.

<Prerequisites>  
  - Drizzle ORMê³¼ [Drizzle kit](/docs/kit-overview)ì„ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
  <Npm>
    drizzle-orm 
    -D drizzle-kit
  </Npm>

  - [Neon serverless driver](https://neon.tech/docs/serverless/serverless-driver)ë„ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
  <Npm>
    @neondatabase/serverless
  </Npm>
  
  - í™˜ê²½ ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `dotenv` íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
  <Npm>
    dotenv
  </Npm>  
</Prerequisites>

<Steps>


#### ìƒˆë¡œìš´ Neon í”„ë¡œì íŠ¸ ìƒì„±í•˜ê¸°

[Neon Console](https://console.neon.tech/app/projects)ì— ë¡œê·¸ì¸í•œ í›„, Projects ì„¹ì…˜ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. ê¸°ì¡´ í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ê±°ë‚˜ `New Project` ë²„íŠ¼ì„ í´ë¦­í•´ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

Neon í”„ë¡œì íŠ¸ëŠ” `neondb`ë¼ëŠ” ì´ë¦„ì˜ Postgres ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” ì´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤.


#### ì—°ê²° ë¬¸ìì—´ ë³€ìˆ˜ ì„¤ì •í•˜ê¸°

í”„ë¡œì íŠ¸ ì½˜ì†”ì—ì„œ **Connection Details** ì„¹ì…˜ìœ¼ë¡œ ì´ë™í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ìì—´ì„ ì°¾ìŠµë‹ˆë‹¤. ì—°ê²° ë¬¸ìì—´ì€ ë‹¤ìŒê³¼ ë¹„ìŠ·í•œ í˜•íƒœì¼ ê²ƒì…ë‹ˆë‹¤:

```bash
postgres://username:password@ep-cool-darkness-123456.us-east-2.aws.neon.tech/neondb
```

Neon ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ë•Œ ì‚¬ìš©í•  `DATABASE_URL` í™˜ê²½ ë³€ìˆ˜ë¥¼ `.env` ë˜ëŠ” `.env.local` íŒŒì¼ì— ì¶”ê°€í•©ë‹ˆë‹¤.

```text copy
DATABASE_URL=NEON_DATABASE_CONNECTION_STRING
```


#### Drizzle ORMì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê¸°

`db.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤:

```typescript
import { drizzle } from "drizzle-orm/neon-http";
import { neon } from "@neondatabase/serverless";
import { config } from "dotenv";

// .env ë˜ëŠ” .env.local íŒŒì¼ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
config({ path: ".env" });

// DATABASE_URL í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Neon ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒì„±
const sql = neon(process.env.DATABASE_URL!);

// Drizzle ORM ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ë‚´ë³´ë‚´ê¸°
export const db = drizzle({ client: sql });
```

ì´ ì½”ë“œëŠ” Drizzle ORMì„ ì‚¬ìš©í•˜ì—¬ Neon ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ëŠ” ê¸°ë³¸ ì„¤ì •ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. `.env` íŒŒì¼ì— `DATABASE_URL`ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.


#### í…Œì´ë¸” ìƒì„±í•˜ê¸°

`schema.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  í…Œì´ë¸”ì„ ì„ ì–¸í•©ë‹ˆë‹¤:

```typescript
import { integer, pgTable, serial, text, timestamp } from 'drizzle-orm/pg-core';

export const usersTable = pgTable('users_table', {
  id: serial('id').primaryKey(), // ê¸°ë³¸ í‚¤ë¡œ ì„¤ì •ëœ ìë™ ì¦ê°€ ID
  name: text('name').notNull(),  // ì´ë¦„ (í•„ìˆ˜)
  age: integer('age').notNull(), // ë‚˜ì´ (í•„ìˆ˜)
  email: text('email').notNull().unique(), // ì´ë©”ì¼ (í•„ìˆ˜, ê³ ìœ ê°’)
});

export const postsTable = pgTable('posts_table', {
  id: serial('id').primaryKey(), // ê¸°ë³¸ í‚¤ë¡œ ì„¤ì •ëœ ìë™ ì¦ê°€ ID
  title: text('title').notNull(), // ì œëª© (í•„ìˆ˜)
  content: text('content').notNull(), // ë‚´ìš© (í•„ìˆ˜)
  userId: integer('user_id') // ì‚¬ìš©ì ID (í•„ìˆ˜)
    .notNull()
    .references(() => usersTable.id, { onDelete: 'cascade' }), // usersTableì˜ ID ì°¸ì¡°, ì‚­ì œ ì‹œ ì—°ì‡„ ì‚­ì œ
  createdAt: timestamp('created_at').notNull().defaultNow(), // ìƒì„± ì‹œê°„ (í•„ìˆ˜, ê¸°ë³¸ê°’ í˜„ì¬ ì‹œê°„)
  updatedAt: timestamp('updated_at') // ì—…ë°ì´íŠ¸ ì‹œê°„ (í•„ìˆ˜)
    .notNull()
    .$onUpdate(() => new Date()), // ì—…ë°ì´íŠ¸ ì‹œ í˜„ì¬ ì‹œê°„ìœ¼ë¡œ ìë™ ì„¤ì •
});

export type InsertUser = typeof usersTable.$inferInsert; // ì‚¬ìš©ì ì‚½ì… íƒ€ì…
export type SelectUser = typeof usersTable.$inferSelect; // ì‚¬ìš©ì ì„ íƒ íƒ€ì…

export type InsertPost = typeof postsTable.$inferInsert; // ê²Œì‹œë¬¼ ì‚½ì… íƒ€ì…
export type SelectPost = typeof postsTable.$inferSelect; // ê²Œì‹œë¬¼ ì„ íƒ íƒ€ì…
```

ì´ ì½”ë“œëŠ” `users_table`ê³¼ `posts_table` ë‘ ê°œì˜ í…Œì´ë¸”ì„ ì •ì˜í•©ë‹ˆë‹¤. ê° í…Œì´ë¸”ì€ í•„ìš”í•œ ì»¬ëŸ¼ê³¼ ì œì•½ ì¡°ê±´ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì‚½ì… ë° ì„ íƒ ì‘ì—…ì— ì‚¬ìš©í•  íƒ€ì…ë„ ì •ì˜í•©ë‹ˆë‹¤.


#### Drizzle ì„¤ì • íŒŒì¼ ì„¤ì •í•˜ê¸°

**Drizzle ì„¤ì • íŒŒì¼**ì€ [Drizzle Kit](/docs/kit-overview)ì—ì„œ ì‚¬ìš©í•˜ëŠ” êµ¬ì„± íŒŒì¼ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´, ë§ˆì´ê·¸ë ˆì´ì…˜ í´ë”, ìŠ¤í‚¤ë§ˆ íŒŒì¼ ë“±ì— ëŒ€í•œ ëª¨ë“  ì •ë³´ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `drizzle.config.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•˜ì„¸ìš”:

```typescript copy filename="drizzle.config.ts"
import { config } from 'dotenv';
import { defineConfig } from "drizzle-kit";

config({ path: '.env' });

export default defineConfig({
  schema: "./src/schema.ts",  // ìŠ¤í‚¤ë§ˆ íŒŒì¼ ê²½ë¡œ
  out: "./migrations",        // ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì´ ìƒì„±ë  ê²½ë¡œ
  dialect: "postgresql",      // ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ ì¢…ë¥˜
  dbCredentials: {
    url: process.env.DATABASE_URL!,  // ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° URL
  },
});
```

ì´ ì„¤ì • íŒŒì¼ì€ Drizzle Kitì´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë° í•„ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. `schema`ëŠ” ìŠ¤í‚¤ë§ˆ íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼, `out`ì€ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì´ ì €ì¥ë  ê²½ë¡œë¥¼ ì§€ì •í•©ë‹ˆë‹¤. `dialect`ëŠ” ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ ì¢…ë¥˜ë¥¼ ì„¤ì •í•˜ë©°, `dbCredentials`ì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° URLì´ í¬í•¨ë©ë‹ˆë‹¤.


#### ë°ì´í„°ë² ì´ìŠ¤ì— ë³€ê²½ ì‚¬í•­ ì ìš©í•˜ê¸°

`drizzle-kit generate` ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•´ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•˜ê³ , `drizzle-kit migrate` ì»¤ë§¨ë“œë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±:

```bash
npx drizzle-kit generate
```

ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ì€ `drizzle.config.ts`ì— ì§€ì •ëœ `drizzle/migrations` ë””ë ‰í† ë¦¬ì— ì €ì¥ë©ë‹ˆë‹¤. ì´ ë””ë ‰í† ë¦¬ì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë° í•„ìš”í•œ SQL íŒŒì¼ê³¼, ë‹¤ì–‘í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„ì—ì„œì˜ ìŠ¤í‚¤ë§ˆ ìŠ¤ëƒ…ìƒ·ì„ ì €ì¥í•˜ëŠ” `meta` í´ë”ê°€ í¬í•¨ë©ë‹ˆë‹¤.

ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜ˆì‹œ:

```sql
CREATE TABLE IF NOT EXISTS "posts_table" (
	"id" serial PRIMARY KEY NOT NULL,
	"title" text NOT NULL,
	"content" text NOT NULL,
	"user_id" integer NOT NULL,
	"created_at" timestamp DEFAULT now() NOT NULL,
	"updated_at" timestamp NOT NULL
);
--> statement-breakpoint
CREATE TABLE IF NOT EXISTS "users_table" (
	"id" serial PRIMARY KEY NOT NULL,
	"name" text NOT NULL,
	"age" integer NOT NULL,
	"email" text NOT NULL,
	CONSTRAINT "users_table_email_unique" UNIQUE("email")
);
--> statement-breakpoint
DO $$ BEGIN
 ALTER TABLE "posts_table" ADD CONSTRAINT "posts_table_user_id_users_table_id_fk" FOREIGN KEY ("user_id") REFERENCES "public"."users_table"("id") ON DELETE cascade ON UPDATE no action;
EXCEPTION
 WHEN duplicate_object THEN null;
END $$;
```

ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰:

```bash
npx drizzle-kit migrate
```

ë˜ëŠ”, [Drizzle kit push ì»¤ë§¨ë“œ](/docs/kit-overview#prototyping-with-db-push)ë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì§ì ‘ ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

```bash
npx drizzle-kit push
```

<Callout type="warning">
push ì»¤ë§¨ë“œëŠ” ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œ ìƒˆë¡œìš´ ìŠ¤í‚¤ë§ˆ ë””ìì¸ì´ë‚˜ ë³€ê²½ ì‚¬í•­ì„ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸í•´ì•¼ í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ê´€ë¦¬í•˜ëŠ” ì˜¤ë²„í—¤ë“œ ì—†ì´ ë¹ ë¥´ê²Œ ë°˜ë³µ ì‘ì—…ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</Callout>

</Steps>


### ê¸°ë³¸ íŒŒì¼ êµ¬ì¡°

ì´ í”„ë¡œì íŠ¸ì˜ ê¸°ë³¸ íŒŒì¼ êµ¬ì¡°ì…ë‹ˆë‹¤. `src/db` ë””ë ‰í† ë¦¬ì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ íŒŒì¼ë“¤ì´ ìœ„ì¹˜í•©ë‹ˆë‹¤. ì—¬ê¸°ì—ëŠ” `db.ts` íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •, `schema.ts` íŒŒì¼ì— ìŠ¤í‚¤ë§ˆ ì •ì˜, ê·¸ë¦¬ê³  `migrate.ts` íŒŒì¼ì— ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ëŠ” `migrations` ë””ë ‰í† ë¦¬ì— ì €ì¥ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì ìš©í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

```plaintext
ğŸ“¦ <project root>
 â”œ ğŸ“‚ src
 â”‚  â”œ ğŸ“œ db.ts
 â”‚  â”” ğŸ“œ schema.ts
 â”œ ğŸ“‚ migrations
 â”‚  â”œ ğŸ“‚ meta
 â”‚  â”‚  â”œ ğŸ“œ _journal.json
 â”‚  â”‚  â”” ğŸ“œ 0000_snapshot.json
 â”‚  â”” ğŸ“œ 0000_dry_richard_fisk.sql
 â”œ ğŸ“œ .env
 â”œ ğŸ“œ drizzle.config.ts
 â”œ ğŸ“œ package.json
 â”” ğŸ“œ tsconfig.json
```


## ì¿¼ë¦¬ ì˜ˆì œ

ì˜ˆë¥¼ ë“¤ì–´, `src/queries` í´ë”ë¥¼ ë§Œë“¤ê³  ê° ì‘ì—…(insert, select, update, delete)ë³„ë¡œ íŒŒì¼ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤.


#### ë°ì´í„° ì‚½ì…

ë°ì´í„° ì‚½ì… ì¿¼ë¦¬ì— ëŒ€í•´ ë” ì•Œì•„ë³´ë ¤ë©´ [ë¬¸ì„œ](/docs/insert)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

```typescript copy filename="src/queries/insert.ts" {4, 8}
import { db } from '../db';
import { InsertPost, InsertUser, postsTable, usersTable } from '../schema';

// ì‚¬ìš©ì ìƒì„± í•¨ìˆ˜
export async function createUser(data: InsertUser) {
  await db.insert(usersTable).values(data);
}

// ê²Œì‹œë¬¼ ìƒì„± í•¨ìˆ˜
export async function createPost(data: InsertPost) {
  await db.insert(postsTable).values(data);
}
```


#### ë°ì´í„° ì„ íƒí•˜ê¸°

ì„ íƒ ì¿¼ë¦¬ì— ëŒ€í•œ ë” ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/select)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

```typescript copy filename="src/queries/select.ts" {5, 16, 41}
import { asc, between, count, eq, getTableColumns, sql } from 'drizzle-orm';
import { db } from '../db';
import { SelectUser, usersTable, postsTable } from '../schema';

// íŠ¹ì • IDë¥¼ ê°€ì§„ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
export async function getUserById(id: SelectUser['id']): Promise<
  Array<{
    id: number;
    name: string;
    age: number;
    email: string;
  }>
> {
  return db.select().from(usersTable).where(eq(usersTable.id, id));
}

// ì‚¬ìš©ìì™€ ê·¸ë“¤ì˜ ê²Œì‹œë¬¼ ìˆ˜ë¥¼ í•¨ê»˜ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
export async function getUsersWithPostsCount(
  page = 1,
  pageSize = 5,
): Promise<
  Array<{
    postsCount: number;
    id: number;
    name: string;
    age: number;
    email: string;
  }>
> {
  return db
    .select({
      ...getTableColumns(usersTable),
      postsCount: count(postsTable.id),
    })
    .from(usersTable)
    .leftJoin(postsTable, eq(usersTable.id, postsTable.userId))
    .groupBy(usersTable.id)
    .orderBy(asc(usersTable.id))
    .limit(pageSize)
    .offset((page - 1) * pageSize);
}

// ì§€ë‚œ 24ì‹œê°„ ë™ì•ˆ ì‘ì„±ëœ ê²Œì‹œë¬¼ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
export async function getPostsForLast24Hours(
  page = 1,
  pageSize = 5,
): Promise<
  Array<{
    id: number;
    title: string;
  }>
> {
  return db
    .select({
      id: postsTable.id,
      title: postsTable.title,
    })
    .from(postsTable)
    .where(between(postsTable.createdAt, sql`now() - interval '1 day'`, sql`now()`))
    .orderBy(asc(postsTable.title), asc(postsTable.id))
    .limit(pageSize)
    .offset((page - 1) * pageSize);
}
```

ë˜ëŠ” [ê´€ê³„í˜• ì¿¼ë¦¬ ë¬¸ë²•](/docs/rqb)ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.


#### ë°ì´í„° ì—…ë°ì´íŠ¸

ë°ì´í„° ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ì— ëŒ€í•´ ë” ì•Œì•„ë³´ë ¤ë©´ [ë¬¸ì„œ](/docs/update)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

```typescript copy filename="src/queries/update.ts" {5}
import { eq } from 'drizzle-orm';
import { db } from '../db';
import { SelectPost, postsTable } from '../schema';

export async function updatePost(id: SelectPost['id'], data: Partial<SelectPost>) {
  await db.update(postsTable).set(data).where(eq(postsTable.id, id));
}
```

ìœ„ ì½”ë“œëŠ” `postsTable`ì—ì„œ íŠ¹ì • `id`ë¥¼ ê°€ì§„ ê²Œì‹œë¬¼ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. `Partial<SelectPost>` íƒ€ì…ì˜ `data`ë¥¼ ë°›ì•„ í•´ë‹¹ ê²Œì‹œë¬¼ì˜ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.


#### ë°ì´í„° ì‚­ì œ

ì‚­ì œ ì¿¼ë¦¬ì— ëŒ€í•´ ë” ì•Œì•„ë³´ë ¤ë©´ [ë¬¸ì„œ](/docs/delete)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

```typescript copy filename="src/queries/delete.ts" {5}
import { db } from '../db';
import { eq } from 'drizzle-orm';
import { SelectUser, usersTable } from '../schema';

export async function deleteUser(id: SelectUser['id']) {
  await db.delete(usersTable).where(eq(usersTable.id, id));
}
```


